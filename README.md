# Chatible - realtime chatbot

> Realtime chat app created using Django, Websockets, Redis, Celery and TailwindCSS.

### Table of Contents
* [1 Technologies Used](#1-technologies-used)
* [2 Key Features](#2-key-features)
* [3 GetStarted](#3-get-started)

<br>

## 1 Technologies Used

| Tech Stack                                 | Uses                                                                                                                   |
|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
| **Django**                                 | ...                                                                                                                    |
| **WebSockets** (using Django **Channels**) | sending to the client the automated response generated by the machine learning model immediately when itâ€™s available.  |
| **Redis**                                  | acting as a channel layer for WebSocket communication. </br> acting as a message broker and result backend for Celery. |
| **Celery**                                 | getting the automated response from a machine-learning dialog engine is going to take a while                          |
| **TailwindCSS**                            | creating and styling the user interface.                                                                               |

<br>

## 2 Key features
Walk through:


<br>

## 3 Get Started
- **Clone the project:** 
  - `git clone https://github.com/huskyhehe/chatible-app.git`

- **Config .env:**
  - Rename the `.env-example` file to `.env`
  - Assign `REDIS_ENDPOINT_URI`, `CELERY_BROKER_URL` variables to your own data
 
If you plan to run locally, follow `3.1`. If you run on Docker, follow `3.2`.

### 3.1 Run locally  
- **Install requirements:**
  - Run `pip install requirement.txt`
  - Run `python manage.py migrate` to ensure that the migrations are applied.
  - Run `python manage.py runserver` and go to http://0.0.0.0:8000/ to check if everything works correctly.

- **Train the bot:**
  - Run `python manage.py train`. (`Successfully trained`)
  - Run `python manage.py createsuperuser` to create a superuser.
  - Go to http://localhost:8080/admin and check `statements` to see the response list.

- **Run server:**
  - Run `python manage.py migrate` to ensure that the migrations are applied.
  - Run `python manage.py runserver` and go to http://0.0.0.0:8000/
  - Run `celery -A chatible worker --loglevel=info  --pool=solo` if you want to supervisor celery log.
  - Input message and click send button to interact with the bot.

### 3.2 Run on Docker
- **Build image:**
  - Open Docker, run `docker-compose up --build`
  - Run `docker-compose run --rm web python manage.py migrate` to ensure that the migrations are applied.
  - Run `docker-compose run --rm web python manage.py runserver`and go to http://0.0.0.0:8000/ to check if everything works correctly.

- **Train the bot:**
  - Run `docker-compose run --rm web python manage.py train` (`Successfully trained` indicates success)
  - Run `docker-compose exec web python manage.py createsuperuser` to create a superuser
  - Visit http://localhost:8080/admin and click `statements` to see the response list.

- **Run the project:**
  - Run `docker-compose run --rm web python manage.py migrate` to ensure that the migrations are applied.
  - Run `docker-compose run --rm web python manage.py runserver` and go to http://0.0.0.0:8000/.
  - Input message and click send button to interact with the bot.

<br>

**PS:**
if daphne cannot be installed successfully due to twisted-iocpsupport error, 
go to https://lfd.uci.edu/pythonlibs/ and download `twisted_iocpsupport-1.0.2-cp311-cp311-win_amd64.whl`
(https://download.lfd.uci.edu/pythonlibs/archived/twisted_iocpsupport-1.0.2-cp311-cp311-win_amd64.whl) in the project folder, 
and run `pip install twisted_iocpsupport-1.0.2-cp311-cp311-win_amd64.whl`.